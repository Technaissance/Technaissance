"use strict";!function(n){var p;BbvaComponent.mostpopular=function(){},BbvaComponent.mostpopular.prototype=new BbvaComponent,BbvaComponent.mostpopular.prototype.loadConfig=function(){p.config.css=p.rootElement.data("css")||!1,p.config.list=p.rootElement.data("list")||!1,p.config.num=p.rootElement.data("num")||0,p.config.listTitle=p.rootElement.data("list-title")||"Post m√°s populares",p.config.count=p.rootElement.data("count")||!1,p.config.title=p.rootElement.data("title")||!1,p.config.dateFrom=p.rootElement.data("date-from")||!1,p.config.dateTo=p.rootElement.data("date-to")||!1},BbvaComponent.mostpopular.prototype.drawComponent=function(o){o.append('<div id="mostpopular" ><h3>'+p.config.listTitle+"</h3></div>")},BbvaComponent.mostpopular.prototype.drawPosts=function(o){var e=p.config.num,a="",r=0,t={};t.project=p.getProject(),p.config.thread&&(t.thread=p.config.thread),p.config.dateFrom&&(t.dateFrom=p.config.dateFrom),p.config.dateTo&&(t.dateTo=p.config.dateTo),p.config.list&&t.project&&p.apiCall("mostpopular/",t,"GET",!1,function(o,t){o?console.error("Error obteniendo datos de la api",o):t&&(a='<ol id="mostpopularposts">',n.each(t.data,function(o,t){if(e<=r)return!1;r++;var n=t.title||t.thread;a=(a+="<li>")+'<a href="'+t.thread+'">'+n+"</a></li>"}),a+="</ol>",n("#mostpopular").append(a))})},BbvaComponent.mostpopular.prototype.count=function(){var o=p.getThread(p.rootElement),t=p.config.title||o;p.apiCall("mostpopular",{project:p.getProject(),thread:o},"POST",{title:t},function(o){o&&console.error("Error adding visit to popular component",o)})},BbvaComponent.mostpopular.prototype.init=function(){var o=(p=this).rootElement;p.loadConfig(),p.config.css&&p.loadCss(p.components+"mostpopular/css/style.css"),p.config.count&&p.count(),p.config.list&&(p.drawComponent(o),p.drawPosts(o))},BbvaComponent.mostpopular.prototype.constructor=BbvaComponent.mostpopular}(jQuery,window);